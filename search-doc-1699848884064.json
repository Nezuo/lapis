[{"title":"Collection","type":0,"sectionRef":"#","url":"/lapis/api/Collection","content":"","keywords":""},{"title":"Functions​","type":1,"pageTitle":"Collection","url":"/lapis/api/Collection#functions","content":" "},{"title":"load​","type":1,"pageTitle":"Collection","url":"/lapis/api/Collection#load","content":"&lt;/&gt; Collection:load( key: string, defaultUserIds: {number}? ) → Promise&lt;Document&gt; Loads the document with key, migrates it, and session locks it. If specified, the document's DataStoreKeyInfo:GetUserIds() will be set to defaultUserIds if the document has never been loaded. "},{"title":"Lapis","type":0,"sectionRef":"#","url":"/lapis/api/Lapis","content":"","keywords":""},{"title":"Functions​","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis#functions","content":" "},{"title":"setConfig​","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis#setConfig","content":"&lt;/&gt; Lapis.setConfig(partialConfig: PartialLapisConfig) → () "},{"title":"Types","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis##","content":""},{"title":"​","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis#PartialLapisConfig","content":"interface PartialLapisConfig { saveAttempts: number?-- Max save/close retry attempts loadAttempts: number?-- Max load retry attempts loadRetryDelay: number?-- Seconds between load attempts showRetryWarnings: boolean?-- Show warning on retry dataStoreService: (DataStoreService | table)?-- Useful for mocking DataStoreService, especially in a local place }  Lapis.setConfig({ saveAttempts = 10, showRetryWarnings = false, }) -- The default config values: { saveAttempts = 5, loadAttempts = 20, loadRetryDelay = 1, showRetryWarnings = true, dataStoreService = DataStoreService, }   "},{"title":"createCollection​","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis#createCollection","content":"&lt;/&gt; Lapis.createCollection( name: string, options: CollectionOptions ) → Collection "},{"title":"Types","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis##","content":""},{"title":"​","type":1,"pageTitle":"Lapis","url":"/lapis/api/Lapis#CollectionOptions","content":"interface CollectionOptions { validate: (any) → true | ( false, string )-- Takes a document's data and returns true on success or false and an error on fail. defaultData: any migrations: {(any) → any}-- Migrations take old data and return new data. Order is first to last. }  Creates a Collection. "},{"title":"Document","type":0,"sectionRef":"#","url":"/lapis/api/Document","content":"","keywords":""},{"title":"Functions​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#functions","content":" "},{"title":"read​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#read","content":"&lt;/&gt; Document:read() → any Returns the document's data.  "},{"title":"write​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#write","content":"&lt;/&gt; Document:write(data: any) → () Writes the document's data. warning Throws an error if the document was closed or if the data is invalid.  "},{"title":"addUserId​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#addUserId","content":"&lt;/&gt; Document:addUserId(userId: number) → () Adds a user id to the document's DataStoreKeyInfo:GetUserIds(). The change won't apply until the document is saved or closed. If the user id is already associated with the document the method won't do anything.  "},{"title":"removeUserId​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#removeUserId","content":"&lt;/&gt; Document:removeUserId(userId: number) → () Removes a user id from the document's DataStoreKeyInfo:GetUserIds(). The change won't apply until the document is saved or closed. If the user id is not associated with the document the method won't do anything.  "},{"title":"save​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#save","content":"&lt;/&gt; Document:save() → Promise&lt;()&gt; Saves the document's data. If the save is throttled and you call it multiple times, it will save only once with the latest data. warning Throws an error if the document was closed. warning If the beforeSave callback errors, the returned promise will reject and the data will not be saved.  "},{"title":"close​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#close","content":"&lt;/&gt; Document:close() → Promise&lt;()&gt; Saves the document and removes the session lock. The document is unusable after calling. If a save is currently in progress it will close the document instead. warning Throws an error if the document was closed. warning If the beforeSave or beforeClose callbacks error, the returned promise will reject and the data will not be saved.  "},{"title":"beforeSave​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#beforeSave","content":"&lt;/&gt; Document:beforeSave(callback: () → ()) → () Sets a callback that is run inside document:save and document:close before it saves. The document can be read and written to in the callback. The callback will run before the beforeClose callback inside of document:close. warning Throws an error if it was called previously.  "},{"title":"beforeClose​","type":1,"pageTitle":"Document","url":"/lapis/api/Document#beforeClose","content":"&lt;/&gt; Document:beforeClose(callback: () → ()) → () Sets a callback that is run inside document:close before it saves. The document can be read and written to in the callback. warning Throws an error if it was called previously. "}]