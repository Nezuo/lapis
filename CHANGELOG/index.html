<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Lapis Changelog | lapis</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nezuo.github.io/lapis/CHANGELOG"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Lapis Changelog | lapis"><meta data-rh="true" name="description" content="Unreleased Changes"><meta data-rh="true" property="og:description" content="Unreleased Changes"><link data-rh="true" rel="canonical" href="https://nezuo.github.io/lapis/CHANGELOG"><link data-rh="true" rel="alternate" href="https://nezuo.github.io/lapis/CHANGELOG" hreflang="en"><link data-rh="true" rel="alternate" href="https://nezuo.github.io/lapis/CHANGELOG" hreflang="x-default"><link rel="stylesheet" href="/lapis/assets/css/styles.6b33bbd6.css">
<link rel="preload" href="/lapis/assets/js/runtime~main.3d61a39f.js" as="script">
<link rel="preload" href="/lapis/assets/js/main.a5f7dce0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/lapis/"><b class="navbar__title text--truncate">lapis</b></a><a class="navbar__item navbar__link" href="/lapis/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/lapis/api/">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/lapis/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nezuo/lapis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><article><h1>Lapis Changelog</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unreleased-changes">Unreleased Changes<a href="#unreleased-changes" class="hash-link" aria-label="Direct link to Unreleased Changes" title="Direct link to Unreleased Changes">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="030---april-14-2024">0.3.0 - April 14, 2024<a href="#030---april-14-2024" class="hash-link" aria-label="Direct link to 0.3.0 - April 14, 2024" title="Direct link to 0.3.0 - April 14, 2024">​</a></h3><ul><li><strong>BREAKING CHANGE</strong>: <code>Collection:load</code> no longer caches promises. Each call will now return a unique promise and attempt to load the document separately. This is to fix an edge case that can result in data loss. More information can be found in the pull request. (<a href="https://github.com/nezuo/lapis/pull/48" target="_blank" rel="noopener noreferrer">#48</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="0211---april-9-2024">0.2.11 - April 9, 2024<a href="#0211---april-9-2024" class="hash-link" aria-label="Direct link to 0.2.11 - April 9, 2024" title="Direct link to 0.2.11 - April 9, 2024">​</a></h2><ul><li>Fix infinite yield in <code>game:BindToClose</code> caused by a document failing to load. (<a href="https://github.com/nezuo/lapis/pull/45" target="_blank" rel="noopener noreferrer">#45</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="0210---march-25-2024">0.2.10 - March 25, 2024<a href="#0210---march-25-2024" class="hash-link" aria-label="Direct link to 0.2.10 - March 25, 2024" title="Direct link to 0.2.10 - March 25, 2024">​</a></h2><ul><li><code>Document:load</code> now infinitely yields and doesn&#x27;t load the document after <code>game:BindToClose</code> is called. If a document
does load because UpdateAsync is called just before game close, it is automatically closed. (<a href="https://github.com/nezuo/lapis/pull/43" target="_blank" rel="noopener noreferrer">#43</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="029---january-1-2024">0.2.9 - January 1, 2024<a href="#029---january-1-2024" class="hash-link" aria-label="Direct link to 0.2.9 - January 1, 2024" title="Direct link to 0.2.9 - January 1, 2024">​</a></h2><ul><li><code>Document:close</code> no longer errors when called again and instead returns the original promise. (<a href="https://github.com/nezuo/lapis/pull/35" target="_blank" rel="noopener noreferrer">#35</a>)<ul><li>This is so it won&#x27;t error when called from <code>PlayerRemoving</code> if <code>game:BindToClose</code> happens to run first.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="028---december-27-2023">0.2.8 - December 27, 2023<a href="#028---december-27-2023" class="hash-link" aria-label="Direct link to 0.2.8 - December 27, 2023" title="Direct link to 0.2.8 - December 27, 2023">​</a></h2><ul><li>Removed internal compression code since compression is no longer planned (<a href="https://github.com/nezuo/lapis/pull/31" target="_blank" rel="noopener noreferrer">#31</a>)</li><li>Data is no longer loaded if it doesn&#x27;t pass the <code>validate</code> function. This means it won&#x27;t be session locked and migrated. (<a href="https://github.com/nezuo/lapis/pull/32" target="_blank" rel="noopener noreferrer">#32</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="027---november-12-2023">0.2.7 - November 12, 2023<a href="#027---november-12-2023" class="hash-link" aria-label="Direct link to 0.2.7 - November 12, 2023" title="Direct link to 0.2.7 - November 12, 2023">​</a></h2><ul><li>Add <code>Document:beforeSave</code> callback to make changes to a document before it saves (<a href="https://github.com/nezuo/lapis/pull/29" target="_blank" rel="noopener noreferrer">#29</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="026---october-24-2023">0.2.6 - October 24, 2023<a href="#026---october-24-2023" class="hash-link" aria-label="Direct link to 0.2.6 - October 24, 2023" title="Direct link to 0.2.6 - October 24, 2023">​</a></h2><ul><li>Added types (<a href="https://github.com/nezuo/lapis/pull/24" target="_blank" rel="noopener noreferrer">#24</a>)</li><li>Added <code>document:beforeClose</code> callback to make final changes to a document before it closes (<a href="https://github.com/nezuo/lapis/pull/25" target="_blank" rel="noopener noreferrer">#25</a>)<ul><li>This callback works even when the document is closed by <code>game:BindToClose</code>.</li></ul></li><li>Added APIs to set a document&#x27;s <code>DataStoreKeyInfo:GetUserIds()</code> (<a href="https://github.com/nezuo/lapis/pull/26" target="_blank" rel="noopener noreferrer">#26</a>)<ul><li>Changed <code>Collection:load(key: string)</code> to <code>Collection:load(key: string, defaultUserIds: {number}?)</code><ul><li><code>defaultUserIds</code> only applies if it&#x27;s the first time the document has ever been loaded.</li></ul></li><li>Added <code>Document:addUserId(userId: number)</code></li><li>Added <code>Document:removeUserId(userId: number)</code></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="025---september-8-2023">0.2.5 - September 8, 2023<a href="#025---september-8-2023" class="hash-link" aria-label="Direct link to 0.2.5 - September 8, 2023" title="Direct link to 0.2.5 - September 8, 2023">​</a></h2><ul><li>Fix existing data not being frozen on load (<a href="https://github.com/nezuo/lapis/pull/20" target="_blank" rel="noopener noreferrer">#20</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="024---august-3-2023">0.2.4 - August 3, 2023<a href="#024---august-3-2023" class="hash-link" aria-label="Direct link to 0.2.4 - August 3, 2023" title="Direct link to 0.2.4 - August 3, 2023">​</a></h2><ul><li>Fix <code>game:BindToClose</code> not waiting for documents to close</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="023---july-19-2023">0.2.3 - July 19, 2023<a href="#023---july-19-2023" class="hash-link" aria-label="Direct link to 0.2.3 - July 19, 2023" title="Direct link to 0.2.3 - July 19, 2023">​</a></h2><ul><li>Fix silly mistake where I don&#x27;t return the collection from <code>createCollection</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="022---july-19-2023">0.2.2 - July 19, 2023<a href="#022---july-19-2023" class="hash-link" aria-label="Direct link to 0.2.2 - July 19, 2023" title="Direct link to 0.2.2 - July 19, 2023">​</a></h2><ul><li>Remove write cooldown throttling since write cooldowns <a href="https://devforum.roblox.com/t/removal-of-6s-cool-down-for-data-stores/2436230" target="_blank" rel="noopener noreferrer">were removed</a> (<a href="https://github.com/nezuo/lapis/pull/11" target="_blank" rel="noopener noreferrer">#11</a>)</li><li>Fix save merging algorithm (<a href="https://github.com/nezuo/lapis/pull/13" target="_blank" rel="noopener noreferrer">#13</a>)</li><li>Added new throttle queue which allows load/save/close requests from different keys to be processed at the same time (<a href="https://github.com/nezuo/lapis/pull/15" target="_blank" rel="noopener noreferrer">#15</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="021---june-10-2023">0.2.1 - June 10, 2023<a href="#021---june-10-2023" class="hash-link" aria-label="Direct link to 0.2.1 - June 10, 2023" title="Direct link to 0.2.1 - June 10, 2023">​</a></h2><ul><li>Move TestEZ and DataStoreServiceMock to dev dependencies</li><li>Remove unused files from published package</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="020---may-24-2023">0.2.0 - May 24, 2023<a href="#020---may-24-2023" class="hash-link" aria-label="Direct link to 0.2.0 - May 24, 2023" title="Direct link to 0.2.0 - May 24, 2023">​</a></h2><ul><li>Renamed <code>Collection:openDocument</code> to <code>Collection:load</code></li><li>Renamed <code>retryAttempts</code> config setting to <code>saveAttempts</code></li><li>Renamed <code>acquireLockAttempts</code> config setting to <code>loadAttempts</code></li><li>Renamed <code>acquireLockDelay</code> config setting to <code>loadRetryDelay</code></li><li>Fixed edge case that allowed documents to load even when their migration version exceeded the server&#x27;s latest migration</li></ul></article></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#unreleased-changes" class="table-of-contents__link toc-highlight">Unreleased Changes</a><ul><li><a href="#030---april-14-2024" class="table-of-contents__link toc-highlight">0.3.0 - April 14, 2024</a></li></ul></li><li><a href="#0211---april-9-2024" class="table-of-contents__link toc-highlight">0.2.11 - April 9, 2024</a></li><li><a href="#0210---march-25-2024" class="table-of-contents__link toc-highlight">0.2.10 - March 25, 2024</a></li><li><a href="#029---january-1-2024" class="table-of-contents__link toc-highlight">0.2.9 - January 1, 2024</a></li><li><a href="#028---december-27-2023" class="table-of-contents__link toc-highlight">0.2.8 - December 27, 2023</a></li><li><a href="#027---november-12-2023" class="table-of-contents__link toc-highlight">0.2.7 - November 12, 2023</a></li><li><a href="#026---october-24-2023" class="table-of-contents__link toc-highlight">0.2.6 - October 24, 2023</a></li><li><a href="#025---september-8-2023" class="table-of-contents__link toc-highlight">0.2.5 - September 8, 2023</a></li><li><a href="#024---august-3-2023" class="table-of-contents__link toc-highlight">0.2.4 - August 3, 2023</a></li><li><a href="#023---july-19-2023" class="table-of-contents__link toc-highlight">0.2.3 - July 19, 2023</a></li><li><a href="#022---july-19-2023" class="table-of-contents__link toc-highlight">0.2.2 - July 19, 2023</a></li><li><a href="#021---june-10-2023" class="table-of-contents__link toc-highlight">0.2.1 - June 10, 2023</a></li><li><a href="#020---may-24-2023" class="table-of-contents__link toc-highlight">0.2.0 - May 24, 2023</a></li></ul></div></div></div></main></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 nezuo. Built with Moonwave and Docusaurus.</div></div></div></footer></div>
<script src="/lapis/assets/js/runtime~main.3d61a39f.js"></script>
<script src="/lapis/assets/js/main.a5f7dce0.js"></script>
</body>
</html>